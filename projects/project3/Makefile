# rcnn-fer Docker Makefile
PROGRAM="RCNN-FER"

CPU_REGISTRY_URL=so77id
CPU_VERSION=latest
CPU_DOCKER_IMAGE=tensorflow-opencv-cpu-py3


#COMMANDS
PYTHON_COMMAND=python3
WGET_COMMNAND=wget
UNZIP_COMMAND=unzip
MV_COMMAND=mv
RM_COMMAND=rm

# FILES
DATASET_ZIP_FILE=documents.zip
DATASET_ZIP_FOLDER=documents

#SRC FILES
MAIN_FILE=main.py

#FOLDERS
DATABASE_FOLDER=./dataset

#URLs
DATASET_URL=https://www.dropbox.com/s/fjtbwf7f5p9f3lx/documents.zip


#INPUTS
INPUT_FILE=$(DATABASE_FOLDER)/data.csv
IDS_FILE=$(DATABASE_FOLDER)/ids
METHOD_NAME=baseline
# METHOD_NAME=dbscan
# METHOD_NAME=tsne

#MAGIK NUMBERS
DESCRIPTOR_SIZE=2209
N_DESCRIPTORS=19924

all: main

setup s:
	@echo "[Setup] Setup enviroment"
	@$(WGET_COMMNAND) $(DATASET_URL)
	@$(UNZIP_COMMAND) $(DATASET_ZIP_FILE)
	@$(RM_COMMAND) $(DATASET_ZIP_FILE)
	@$(MV_COMMAND) $(DATASET_ZIP_FOLDER) $(DATABASE_FOLDER)


main m:
	@echo "[Main] Executing"
	@# $(PYTHON_COMMAND) $(MAIN_FILE) -i $(INPUT_FILE) -ds $(DESCRIPTOR_SIZE) -nd $(N_DESCRIPTORS)
	@$(PYTHON_COMMAND) $(MAIN_FILE) -i $(INPUT_FILE) -m $(METHOD_NAME) -a $(IDS_FILE)

